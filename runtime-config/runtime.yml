releases:
- {name: fisma, version: ((release_fisma))}
- {name: tripwire, version: ((release_tripwire))}
- {name: clamav, version: ((release_clamav))}
- {name: snort, version: ((release_snort))}
- {name: awslogs-xenial, version: ((release_awslogs_xenial))}
- {name: nessus-agent, version: ((release_nessus_agent))}
- {name: node-exporter, version: ((release_node_exporter))}
- {name: syslog, version: ((release_syslog))}

addons:
- name: hardening
  jobs:
  - name: harden
    release: fisma
  - name: tripwire
    release: tripwire
    properties:
      tripwire:
        localpass: ((tripwire_localpass))
        sitepass: ((tripwire_sitepass))
  - name: clamav
    release: clamav
  - name: snort
    release: snort
  - name: awslogs-xenial
    release: awslogs-xenial
    properties:
      awslogs-xenial:
        region: ((terraform_outputs.vpc_region))
  - name: nessus-agent
    release: nessus-agent
    properties:
      nessus-agent:
        key: ((/nessus_agent_key))
        group: ((/nessus_agent_group))
        server: ((terraform_outputs.nessus_static_ip))
        port: 8834
  - name: node_exporter
    release: node-exporter
  - name: syslog_forwarder
    release: syslog
    properties:
      syslog:
        address: ((terraform_outputs.platform_syslog_elb_dns_name))
        port: 5514

variables:
- name: tripwire_localpass
  type: password
- name: tripwire_sitepass
  type: password
- name: nessus_agent_key
  type: password
- name: nessus_agent_group
  type: password
